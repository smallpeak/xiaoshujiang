---
title: Sentinel调研
tags: QPS,限流
grammar_cjkRuby: true
---


# 1.Sentinel提供的能力
![主要的特性](https://user-images.githubusercontent.com/9434884/50505538-2c484880-0aaf-11e9-9ffc-cbaaef20be2b.png)

适用的场景

- 双十一零点持续峰值：限流、慢调用降级
-  秒杀（脉冲流量）：限流、慢调用降级
-  消息队列削峰填谷：MQ 消费端可能会出现大批量的消息同时到达，若瞬时请求所有消息会导致系统负载过高。我们利用匀速器模式将消息突刺均摊到一段时间内，让系统负载保持在处理能力水位的同时尽可能地处理更多消息，从而起到“削峰填谷”的效果。
-  冷启动：当流量突然增大的时候，系统从空闲状态到繁忙状态的切换的时间长一些，即如果系统在此之前长期处于空闲的状态，处理请求的速率缓慢增加，经过预期的时间以后，到达系统处理请求速率的设定值；
-  热点商品自动探测、防护：自动统计访问频次最高的热点参数并进行流量控制；
-  集群流量不均匀：通过集群限流来解决集群各个机器的流量不均导致整体限流效果不精确的问题；
- 支持 QPS、响应时间、限流数、异常数
- 轻量级、高性能、sentinel-core 没有任何多余依赖，打包后只有不到 200 KB


# 2.Hystrix提供的能力
![场景](https://raw.githubusercontent.com/wiki/Netflix/Hystrix/images/soa-2-640.png)


## Sentinel、Hystrix、Resilience4j功能比较
[限流熔断技术选型：从Hystrix到Sentinel](https://www.sohu.com/a/282806665_268033)

|  	| Sentinel | 	Hystrix |  Resilience4j |
| -------- | ---------- | ------- | ------- |
| 隔离策略 | 信号量隔离 |	线程池隔离/信号量隔离  | 信号量隔离 |
| 熔断降级策略  | 	基于响应时间或失败比率 	基于失败比率  |  基于异常比率、响应时间 |
| 实时指标实现 |	滑动窗口   | 	滑动窗口（基于 RxJava）  | Ring Bit Buffer |
| 规则配置   | 	支持多种数据源  | 	支持多种数据源  | 有限支持 | 
| 扩展性  | 	多个扩展点  | 	插件的形式  | 接口的形式 |
| 基于注解的支持  | 	支持  | 	支持  |	支持  |
| 限流  | 	基于 QPS，支持基于调用关系的限流  | 	有限的支持  | Rate Limiter |
| 流量整形  | 	支持慢启动、匀速器模式  | 	不支持  | 简单的 Rate Limiter 模式 |
| 系统负载保护  | 	支持  | 	不支持  |  不支持 |
| 控制台  | 	开箱即用，可配置规则、查看秒级监控、机器发现等  | 	不完善  | 不提供控制台，可对接其它监控系统 |
| 常见框架的适配  | 	Servlet、Spring Cloud、Dubbo、gRPC 等  | 	Servlet、Spring Cloud Netflix  |
| 收欢迎程度 |      Star:8428 Fork:2442 2019/8/26最后一次代码体检   |       Star:18119 Fork:3729  2018/10/20最后一次代码体检     |  Star:4121 Fork:490 2019/8/26最后一次代码体检  |
| 开源公司 | 阿里  双11  | NetFlix  停止更新维护 |  缺乏生产级别的配套设施 |



 1. Hystrix关注点
      隔离 和 熔断 为主的容错机制，超时或被熔断的调用将会快速失败，并可以提供 fallback 机制
 2. Sentinel关注点
    多样化的流量控制
    熔断降级
    系统负载保护
    实时监控和控制台
	承接了阿里巴巴近 10 年的双十一大促流量的核心场景，流控维度包括流控指标、流控效果（塑形）、调用关系、热点、集群等各种维度，针对系统维度也提供自适应的保护机制
 3. Resilience4j关注点
    Hystrix停更后的官方推荐方案
	轻量的熔断降级库
	使用较小较新的项目，缺乏生产级别的配套设施

